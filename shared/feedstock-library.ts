export interface FeedstockProperty {
  value: string;
  unit: string;
  confidence: "high" | "medium" | "low";
  provenance: string;
  group: "identity" | "physical" | "biochemical" | "contaminants" | "extended" | "composition" | "flow" | "energy";
  displayName: string;
  sortOrder: number;
}

export interface FeedstockProfile {
  name: string;
  aliases: string[];
  category: string;
  properties: Record<string, FeedstockProperty>;
}

export interface EnrichedFeedstockSpec {
  value: string;
  unit: string;
  source: "user_provided" | "ai_inferred" | "estimated_default";
  confidence: "high" | "medium" | "low";
  provenance: string;
  group: "identity" | "physical" | "biochemical" | "contaminants" | "extended" | "composition" | "flow" | "energy";
  displayName: string;
  sortOrder: number;
}

export const feedstockGroupLabels: Record<string, string> = {
  identity: "Identity & Flow",
  physical: "Physical Characteristics",
  biochemical: "Organic & Biochemical Properties",
  contaminants: "Contaminants & Inerts",
  extended: "Extended Parameters",
  flow: "Gas Flow & Pressure",
  composition: "Gas Composition",
  energy: "Energy Content",
};

export const feedstockGroupOrder: string[] = [
  "identity",
  "flow",
  "composition",
  "energy",
  "physical",
  "biochemical",
  "contaminants",
  "extended",
];

export const FEEDSTOCK_LIBRARY: FeedstockProfile[] = [
  {
    name: "Potato Waste",
    aliases: ["potato waste", "potato processing waste", "potato peels", "potato culls", "potato processing", "potato residue", "potato slurry"],
    category: "Food Processing Waste",
    properties: {
      deliveryForm: {
        value: "Slurry / wet solid",
        unit: "",
        confidence: "medium",
        provenance: "Typical for potato processing facilities; peels and culls are often conveyed as wet solids or slurry",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw, unprocessed",
        unit: "",
        confidence: "medium",
        provenance: "Standard receiving condition for food processing waste streams",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "12-18",
        unit: "% wet basis",
        confidence: "medium",
        provenance: "Literature range for potato processing waste (EPA AgSTAR; Labatut et al., 2011; Achinas & Euverink, 2016)",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "85-92",
        unit: "% of TS",
        confidence: "medium",
        provenance: "Literature range for potato waste VS/TS (Labatut et al., 2011; Gunaseelan, 1997)",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.85-0.92",
        unit: "",
        confidence: "medium",
        provenance: "Derived from VS and TS ranges; consistent with food processing waste literature",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "82-88",
        unit: "%",
        confidence: "medium",
        provenance: "Derived from TS range (100% - TS%); typical for wet food processing waste",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      bulkDensity: {
        value: "55-65",
        unit: "lb/ft³",
        confidence: "low",
        provenance: "Estimated based on moisture content and typical food waste densities",
        group: "physical",
        displayName: "Bulk Density (as received)",
        sortOrder: 7,
      },
      cnRatio: {
        value: "20-30",
        unit: "",
        confidence: "medium",
        provenance: "Literature range for potato waste C:N (Gunaseelan, 1997; Li et al., 2013)",
        group: "biochemical",
        displayName: "C:N Ratio",
        sortOrder: 8,
      },
      biodegradableFraction: {
        value: "75-85",
        unit: "% of VS",
        confidence: "medium",
        provenance: "High starch content in potato waste yields high biodegradability (Labatut et al., 2011)",
        group: "biochemical",
        displayName: "Biodegradable Fraction of VS",
        sortOrder: 9,
      },
      methanePotential: {
        value: "0.30-0.42",
        unit: "m³ CH₄/kg VS",
        confidence: "medium",
        provenance: "BMP literature values for potato waste (Gunaseelan, 1997; Labatut et al., 2011; Parawira et al., 2004)",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      inertFraction: {
        value: "2-5",
        unit: "% by mass",
        confidence: "low",
        provenance: "Estimated; potato processing waste typically has low inert content unless mixed with field soil/stones",
        group: "contaminants",
        displayName: "Inert/Contaminant Fraction",
        sortOrder: 11,
      },
      preprocessingRequirement: {
        value: "Screening, size reduction (grinding)",
        unit: "",
        confidence: "medium",
        provenance: "Standard preprocessing for potato waste to ensure consistent particle size for digestion",
        group: "contaminants",
        displayName: "Expected Preprocessing",
        sortOrder: 12,
      },
      tkn: {
        value: "2.0-4.0",
        unit: "g/kg wet",
        confidence: "low",
        provenance: "Estimated from typical potato waste nitrogen content (Achinas & Euverink, 2016)",
        group: "extended",
        displayName: "Total Kjeldahl Nitrogen (TKN)",
        sortOrder: 13,
      },
      lipidFraction: {
        value: "0.1-0.5",
        unit: "%",
        confidence: "low",
        provenance: "Potato waste is predominantly starch/carbohydrate with very low lipid content",
        group: "extended",
        displayName: "Lipid Fraction",
        sortOrder: 14,
      },
      foamingRisk: {
        value: "Low",
        unit: "",
        confidence: "medium",
        provenance: "Low protein and lipid content reduces foaming risk compared to high-protein substrates",
        group: "extended",
        displayName: "Foaming Risk",
        sortOrder: 15,
      },
      inhibitionRisk: {
        value: "Low (monitor pH due to rapid acidification)",
        unit: "",
        confidence: "medium",
        provenance: "High starch content can cause rapid VFA accumulation; monitor pH and VFA/alkalinity ratio",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "35-45",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Starch-rich substrate with moderate soluble fraction; rapidly hydrolyzable carbohydrates (Labatut et al., 2011)",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Dairy Manure",
    aliases: ["dairy manure", "cow manure", "cattle manure", "dairy waste", "dairy", "dairy farm waste", "dairy farm manure"],
    category: "Animal Manure",
    properties: {
      deliveryForm: {
        value: "Slurry (scraped or flushed)",
        unit: "",
        confidence: "medium",
        provenance: "Standard dairy manure handling; flush systems typical in Pacific NW operations",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw, as-collected",
        unit: "",
        confidence: "medium",
        provenance: "Dairy manure typically received without preprocessing unless sand-bedded",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "8-12",
        unit: "% wet basis",
        confidence: "high",
        provenance: "Well-established range for scraped dairy manure (ASAE D384.2; EPA AgSTAR Handbook)",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "75-85",
        unit: "% of TS",
        confidence: "high",
        provenance: "Standard dairy manure VS/TS range (ASAE D384.2; EPA AgSTAR)",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.75-0.85",
        unit: "",
        confidence: "high",
        provenance: "Derived from VS and TS data; well-established in dairy AD literature",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "88-92",
        unit: "%",
        confidence: "high",
        provenance: "Derived from TS range; consistent with scraped dairy manure",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      bulkDensity: {
        value: "60-65",
        unit: "lb/ft³",
        confidence: "medium",
        provenance: "Typical for liquid/slurry dairy manure (ASAE D384.2)",
        group: "physical",
        displayName: "Bulk Density (as received)",
        sortOrder: 7,
      },
      cnRatio: {
        value: "15-25",
        unit: "",
        confidence: "high",
        provenance: "Standard C:N for dairy manure (ASAE D384.2; Möller & Müller, 2012)",
        group: "biochemical",
        displayName: "C:N Ratio",
        sortOrder: 8,
      },
      biodegradableFraction: {
        value: "40-55",
        unit: "% of VS",
        confidence: "medium",
        provenance: "Dairy manure has moderate biodegradability due to lignocellulosic fiber from feed (Labatut et al., 2011)",
        group: "biochemical",
        displayName: "Biodegradable Fraction of VS",
        sortOrder: 9,
      },
      methanePotential: {
        value: "0.15-0.25",
        unit: "m³ CH₄/kg VS",
        confidence: "high",
        provenance: "Well-established BMP range for dairy manure (EPA AgSTAR; Möller et al., 2004)",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      inertFraction: {
        value: "5-15",
        unit: "% by mass",
        confidence: "medium",
        provenance: "Sand bedding, grit, and undigested fiber; varies significantly by farm management",
        group: "contaminants",
        displayName: "Inert/Contaminant Fraction",
        sortOrder: 11,
      },
      preprocessingRequirement: {
        value: "Sand separation, grit removal, mixing",
        unit: "",
        confidence: "medium",
        provenance: "Sand-bedded dairies require sand separation; all systems benefit from mixing/homogenization",
        group: "contaminants",
        displayName: "Expected Preprocessing",
        sortOrder: 12,
      },
      tkn: {
        value: "3.5-5.5",
        unit: "g/kg wet",
        confidence: "medium",
        provenance: "Literature values for dairy manure nitrogen (ASAE D384.2; Möller & Müller, 2012)",
        group: "extended",
        displayName: "Total Kjeldahl Nitrogen (TKN)",
        sortOrder: 13,
      },
      ammoniaN: {
        value: "1.5-3.0",
        unit: "g/kg wet",
        confidence: "medium",
        provenance: "Typically 40-60% of TKN in dairy manure (Möller & Müller, 2012)",
        group: "extended",
        displayName: "Ammonia-N",
        sortOrder: 14,
      },
      pathogenRisk: {
        value: "Moderate",
        unit: "",
        confidence: "medium",
        provenance: "Animal manure carries potential pathogens; thermophilic digestion or pasteurization may be required",
        group: "extended",
        displayName: "Pathogen Risk Class",
        sortOrder: 15,
      },
      inhibitionRisk: {
        value: "Moderate (ammonia at high loading rates)",
        unit: "",
        confidence: "medium",
        provenance: "High nitrogen content can cause ammonia inhibition at elevated OLR; monitor FAN levels",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "25-35",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Moderate sCOD due to lignocellulosic fiber; particulate fraction dominant (ASAE D384.2; Møller et al., 2004)",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Food Waste",
    aliases: ["food waste", "food scraps", "food processing waste", "organic food waste", "food residuals", "commercial food waste", "restaurant waste", "cafeteria waste"],
    category: "Food Waste",
    properties: {
      deliveryForm: {
        value: "Mixed solid / slurry",
        unit: "",
        confidence: "medium",
        provenance: "Food waste form varies; commercial sources often deliver as mixed solids requiring depackaging",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Packaged or loose; requires depackaging/sorting",
        unit: "",
        confidence: "medium",
        provenance: "Commercial/retail food waste often arrives packaged; pre-consumer may be loose",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "20-30",
        unit: "% wet basis",
        confidence: "medium",
        provenance: "Literature range for mixed food waste (Zhang et al., 2014; EPA WARM model)",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "85-95",
        unit: "% of TS",
        confidence: "medium",
        provenance: "Food waste has high organic content and low ash (Zhang et al., 2014; Browne & Murphy, 2013)",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.85-0.95",
        unit: "",
        confidence: "medium",
        provenance: "Derived from VS and TS ranges; typical for source-separated food waste",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "70-80",
        unit: "%",
        confidence: "medium",
        provenance: "Derived from TS range; consistent with mixed food waste composition",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      bulkDensity: {
        value: "45-55",
        unit: "lb/ft³",
        confidence: "low",
        provenance: "Estimated; varies significantly with composition and packaging content",
        group: "physical",
        displayName: "Bulk Density (as received)",
        sortOrder: 7,
      },
      cnRatio: {
        value: "14-22",
        unit: "",
        confidence: "medium",
        provenance: "Literature range for mixed food waste C:N (Zhang et al., 2014; Li et al., 2013)",
        group: "biochemical",
        displayName: "C:N Ratio",
        sortOrder: 8,
      },
      biodegradableFraction: {
        value: "80-90",
        unit: "% of VS",
        confidence: "medium",
        provenance: "Food waste is highly biodegradable; one of the highest-yield AD substrates (Zhang et al., 2014)",
        group: "biochemical",
        displayName: "Biodegradable Fraction of VS",
        sortOrder: 9,
      },
      methanePotential: {
        value: "0.35-0.55",
        unit: "m³ CH₄/kg VS",
        confidence: "medium",
        provenance: "BMP for mixed food waste (Zhang et al., 2014; Browne & Murphy, 2013; Kafle et al., 2013)",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      inertFraction: {
        value: "5-15",
        unit: "% by mass",
        confidence: "medium",
        provenance: "Packaging contamination in commercial food waste; varies by source separation quality",
        group: "contaminants",
        displayName: "Inert/Contaminant Fraction",
        sortOrder: 11,
      },
      preprocessingRequirement: {
        value: "Depackaging, screening, grinding, dilution",
        unit: "",
        confidence: "medium",
        provenance: "Standard food waste preprocessing train for AD facilities (EPA guidelines)",
        group: "contaminants",
        displayName: "Expected Preprocessing",
        sortOrder: 12,
      },
      tkn: {
        value: "4.0-8.0",
        unit: "g/kg wet",
        confidence: "low",
        provenance: "Varies widely with food waste composition; protein-rich waste has higher N",
        group: "extended",
        displayName: "Total Kjeldahl Nitrogen (TKN)",
        sortOrder: 13,
      },
      fogContent: {
        value: "10-30",
        unit: "% of TS",
        confidence: "low",
        provenance: "FOG fraction varies by source; restaurant waste higher than pre-consumer",
        group: "extended",
        displayName: "FOG (Fats, Oils, Grease)",
        sortOrder: 14,
      },
      foamingRisk: {
        value: "Moderate to High",
        unit: "",
        confidence: "medium",
        provenance: "FOG and protein content increase foaming risk; antifoam systems may be needed",
        group: "extended",
        displayName: "Foaming Risk",
        sortOrder: 15,
      },
      inhibitionRisk: {
        value: "Moderate (VFA accumulation, ammonia, salts)",
        unit: "",
        confidence: "medium",
        provenance: "Rapid hydrolysis can cause VFA spikes; high protein sources risk ammonia inhibition",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "30-45",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Mixed composition with variable soluble fraction; sugars and organic acids readily soluble (Zhang et al., 2014)",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "FOG (Fats, Oils, Grease)",
    aliases: ["fog", "fats oils grease", "grease trap waste", "used cooking oil", "yellow grease", "brown grease", "trap grease", "fats oils and grease"],
    category: "FOG",
    properties: {
      deliveryForm: {
        value: "Liquid / semi-solid",
        unit: "",
        confidence: "medium",
        provenance: "FOG typically received as pumpable liquid or semi-solid from grease traps and interceptors",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw; may require heating for flow",
        unit: "",
        confidence: "medium",
        provenance: "FOG solidifies at ambient temperature; often requires heated receiving and mixing",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "5-30",
        unit: "% wet basis",
        confidence: "low",
        provenance: "Wide range depending on source; grease trap waste lower TS than rendered fats (Long et al., 2012)",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "90-98",
        unit: "% of TS",
        confidence: "medium",
        provenance: "FOG is almost entirely organic with very low ash content (Long et al., 2012)",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.90-0.98",
        unit: "",
        confidence: "medium",
        provenance: "Derived from VS and TS; FOG has highest VS/TS of common AD substrates",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "70-95",
        unit: "%",
        confidence: "low",
        provenance: "Varies widely; grease trap waste is mostly water, rendered fats are drier",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      cnRatio: {
        value: "23-40",
        unit: "",
        confidence: "low",
        provenance: "FOG has high carbon and low nitrogen; C:N varies by fat/protein ratio",
        group: "biochemical",
        displayName: "C:N Ratio",
        sortOrder: 8,
      },
      biodegradableFraction: {
        value: "85-95",
        unit: "% of VS",
        confidence: "medium",
        provenance: "Fats are highly biodegradable but slow to hydrolyze; long-chain fatty acid degradation",
        group: "biochemical",
        displayName: "Biodegradable Fraction of VS",
        sortOrder: 9,
      },
      methanePotential: {
        value: "0.70-1.00",
        unit: "m³ CH₄/kg VS",
        confidence: "medium",
        provenance: "FOG has highest BMP of common AD substrates (Long et al., 2012; Alves et al., 2009)",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      inertFraction: {
        value: "1-5",
        unit: "% by mass",
        confidence: "low",
        provenance: "Grease trap waste may contain grit and debris; rendered fats are cleaner",
        group: "contaminants",
        displayName: "Inert/Contaminant Fraction",
        sortOrder: 11,
      },
      preprocessingRequirement: {
        value: "Heating, screening, metered dosing",
        unit: "",
        confidence: "medium",
        provenance: "FOG must be added gradually to avoid LCFA inhibition; heating ensures pumpability",
        group: "contaminants",
        displayName: "Expected Preprocessing",
        sortOrder: 12,
      },
      foamingRisk: {
        value: "High",
        unit: "",
        confidence: "high",
        provenance: "FOG is the primary cause of foaming in AD systems; antifoam and controlled dosing essential",
        group: "extended",
        displayName: "Foaming Risk",
        sortOrder: 15,
      },
      inhibitionRisk: {
        value: "High (LCFA inhibition at excessive loading)",
        unit: "",
        confidence: "high",
        provenance: "Long-chain fatty acids from FOG hydrolysis inhibit methanogens; limit FOG to 20-30% of OLR",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "5-15",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Predominantly particulate/colloidal lipids; low soluble fraction until hydrolysis (Long et al., 2012)",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Crop Residue",
    aliases: ["crop residue", "crop waste", "agricultural residue", "agricultural waste", "corn stover", "wheat straw", "straw", "crop silage", "energy crops", "grass silage"],
    category: "Agricultural Residue",
    properties: {
      deliveryForm: {
        value: "Solid (baled or loose)",
        unit: "",
        confidence: "medium",
        provenance: "Crop residues typically delivered as baled material or loose chopped biomass",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Dry, requires mixing/slurrying",
        unit: "",
        confidence: "medium",
        provenance: "High-solids crop residues need dilution or co-digestion with wet substrates",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "25-50",
        unit: "% wet basis",
        confidence: "medium",
        provenance: "Range for field-dried crop residues (ASAE D384.2; Mussoline et al., 2013)",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "80-92",
        unit: "% of TS",
        confidence: "medium",
        provenance: "Crop residues have high VS but significant lignocellulosic fraction (Mussoline et al., 2013)",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.80-0.92",
        unit: "",
        confidence: "medium",
        provenance: "Derived from VS and TS ranges for typical crop residues",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      cnRatio: {
        value: "40-80",
        unit: "",
        confidence: "medium",
        provenance: "Crop residues have high C:N; often require co-digestion with nitrogen-rich substrates",
        group: "biochemical",
        displayName: "C:N Ratio",
        sortOrder: 8,
      },
      biodegradableFraction: {
        value: "30-50",
        unit: "% of VS",
        confidence: "medium",
        provenance: "Lignocellulosic structure limits biodegradability; pretreatment improves yield",
        group: "biochemical",
        displayName: "Biodegradable Fraction of VS",
        sortOrder: 9,
      },
      methanePotential: {
        value: "0.15-0.30",
        unit: "m³ CH₄/kg VS",
        confidence: "medium",
        provenance: "BMP for crop residues varies by lignin content (Mussoline et al., 2013; Chandra et al., 2012)",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      preprocessingRequirement: {
        value: "Size reduction, mixing with liquid substrate",
        unit: "",
        confidence: "medium",
        provenance: "Chopping/grinding required; high-solids feedstock needs co-digestion or wet preprocessing",
        group: "contaminants",
        displayName: "Expected Preprocessing",
        sortOrder: 12,
      },
      inhibitionRisk: {
        value: "Low (nutrient deficiency possible)",
        unit: "",
        confidence: "medium",
        provenance: "Low nitrogen may limit microbial activity; high C:N requires nitrogen supplementation or co-digestion",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "10-20",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Highly lignocellulosic; majority of COD is particulate/structural (Triolo et al., 2011)",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Poultry Litter",
    aliases: ["poultry litter", "chicken manure", "chicken litter", "poultry manure", "turkey litter", "broiler litter"],
    category: "Animal Manure",
    properties: {
      deliveryForm: {
        value: "Solid (with bedding material)",
        unit: "",
        confidence: "medium",
        provenance: "Poultry litter includes manure mixed with bedding (wood shavings, straw, etc.)",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw, with bedding; requires dilution",
        unit: "",
        confidence: "medium",
        provenance: "High-solids poultry litter requires water addition for wet AD systems",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "50-75",
        unit: "% wet basis",
        confidence: "medium",
        provenance: "Poultry litter TS depends on bedding type and cleanout frequency (ASAE D384.2)",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "60-75",
        unit: "% of TS",
        confidence: "medium",
        provenance: "Lower VS/TS due to bedding material and high ash content (ASAE D384.2)",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.60-0.75",
        unit: "",
        confidence: "medium",
        provenance: "Derived from VS and TS; bedding and ash reduce VS fraction",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      cnRatio: {
        value: "8-15",
        unit: "",
        confidence: "medium",
        provenance: "Poultry manure is nitrogen-rich with low C:N (ASAE D384.2; Kelleher et al., 2002)",
        group: "biochemical",
        displayName: "C:N Ratio",
        sortOrder: 8,
      },
      biodegradableFraction: {
        value: "45-60",
        unit: "% of VS",
        confidence: "medium",
        provenance: "Moderate biodegradability; bedding material reduces overall digestibility",
        group: "biochemical",
        displayName: "Biodegradable Fraction of VS",
        sortOrder: 9,
      },
      methanePotential: {
        value: "0.20-0.35",
        unit: "m³ CH₄/kg VS",
        confidence: "medium",
        provenance: "BMP for poultry litter (Kelleher et al., 2002; Niu et al., 2013)",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      preprocessingRequirement: {
        value: "Dilution, mixing, possible pretreatment for bedding",
        unit: "",
        confidence: "medium",
        provenance: "High-solids content requires significant dilution for wet AD systems",
        group: "contaminants",
        displayName: "Expected Preprocessing",
        sortOrder: 12,
      },
      inhibitionRisk: {
        value: "High (ammonia toxicity at thermophilic temperatures)",
        unit: "",
        confidence: "high",
        provenance: "Very high nitrogen content causes free ammonia inhibition; requires careful OLR management",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "20-30",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Moderate sCOD from uric acid and soluble nitrogen compounds (Li et al., 2013)",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Swine Manure",
    aliases: ["swine manure", "pig manure", "hog manure", "swine waste", "pig waste", "hog waste"],
    category: "Animal Manure",
    properties: {
      deliveryForm: {
        value: "Liquid slurry (pit-stored)",
        unit: "",
        confidence: "medium",
        provenance: "Swine manure typically collected via pit storage as liquid slurry",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw slurry",
        unit: "",
        confidence: "medium",
        provenance: "Swine slurry received directly from storage pits; minimal preprocessing",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "3-8",
        unit: "% wet basis",
        confidence: "high",
        provenance: "Swine slurry is relatively dilute (ASAE D384.2; EPA AgSTAR)",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "70-80",
        unit: "% of TS",
        confidence: "medium",
        provenance: "Standard swine manure VS/TS (ASAE D384.2)",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.70-0.80",
        unit: "",
        confidence: "medium",
        provenance: "Derived from VS and TS data for swine manure",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      cnRatio: {
        value: "10-18",
        unit: "",
        confidence: "medium",
        provenance: "Swine manure has moderate-low C:N; nitrogen-rich substrate (ASAE D384.2)",
        group: "biochemical",
        displayName: "C:N Ratio",
        sortOrder: 8,
      },
      methanePotential: {
        value: "0.25-0.35",
        unit: "m³ CH₄/kg VS",
        confidence: "medium",
        provenance: "BMP for swine manure (EPA AgSTAR; Moller et al., 2004)",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      preprocessingRequirement: {
        value: "Mixing, possible solids screening",
        unit: "",
        confidence: "medium",
        provenance: "Swine slurry generally ready for digestion; screening removes debris",
        group: "contaminants",
        displayName: "Expected Preprocessing",
        sortOrder: 12,
      },
      inhibitionRisk: {
        value: "Moderate (ammonia, hydrogen sulfide)",
        unit: "",
        confidence: "medium",
        provenance: "High nitrogen and sulfur content; H2S in biogas requires treatment",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "30-40",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Higher soluble fraction than dairy due to more digestible feed; soluble proteins and VFAs (Møller et al., 2004)",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Municipal Wastewater Sludge",
    aliases: ["wastewater sludge", "sewage sludge", "biosolids", "wwtf sludge", "wwtp sludge", "primary sludge", "waste activated sludge", "was", "municipal sludge"],
    category: "Wastewater Sludge",
    properties: {
      deliveryForm: {
        value: "Thickened liquid sludge",
        unit: "",
        confidence: "medium",
        provenance: "WWTP sludge typically thickened to 3-6% TS before digestion",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Thickened; blended primary + secondary",
        unit: "",
        confidence: "medium",
        provenance: "Standard practice is to blend primary and WAS before mesophilic AD",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "3-6",
        unit: "% wet basis",
        confidence: "medium",
        provenance: "Typical thickened mixed sludge TS for AD feed (WEF MOP 8)",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "65-80",
        unit: "% of TS",
        confidence: "medium",
        provenance: "Blended primary + WAS VS/TS range (WEF MOP 8; Metcalf & Eddy)",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.65-0.80",
        unit: "",
        confidence: "medium",
        provenance: "Derived from VS and TS; depends on primary/WAS blend ratio",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      cnRatio: {
        value: "8-15",
        unit: "",
        confidence: "medium",
        provenance: "Wastewater sludge is nitrogen-rich; low C:N (Metcalf & Eddy)",
        group: "biochemical",
        displayName: "C:N Ratio",
        sortOrder: 8,
      },
      methanePotential: {
        value: "0.20-0.35",
        unit: "m³ CH₄/kg VS",
        confidence: "medium",
        provenance: "BMP depends on primary/WAS ratio; primary sludge yields more methane (WEF MOP 8)",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      preprocessingRequirement: {
        value: "Thickening, screening, blending",
        unit: "",
        confidence: "medium",
        provenance: "Standard WWTP sludge preprocessing before AD (WEF MOP 8)",
        group: "contaminants",
        displayName: "Expected Preprocessing",
        sortOrder: 12,
      },
      inhibitionRisk: {
        value: "Low to Moderate (heavy metals, industrial discharges)",
        unit: "",
        confidence: "medium",
        provenance: "Industrial pretreatment program compliance reduces inhibition risk; monitor heavy metals",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "20-30",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Mixed primary and secondary sludge; sCOD from cell lysis products (Metcalf & Eddy, 5th Ed.)",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Whole Potatoes",
    aliases: ["whole potatoes", "whole potato", "potato culls", "cull potatoes", "reject potatoes"],
    category: "Food Processing Waste",
    properties: {
      deliveryForm: {
        value: "Wet solid",
        unit: "",
        confidence: "medium",
        provenance: "Whole potatoes typically delivered as wet solids from sorting/grading operations",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw, unprocessed",
        unit: "",
        confidence: "medium",
        provenance: "Cull or reject potatoes received whole without processing",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "18-22",
        unit: "% wet basis",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "85-92",
        unit: "% of TS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.85-0.92",
        unit: "",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "78-82",
        unit: "%",
        confidence: "high",
        provenance: "Derived from TS range (100% - TS%)",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      methanePotential: {
        value: "5.6-6.0",
        unit: "scf CH₄/lb VS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      energyContent: {
        value: "1.78-2.53",
        unit: "MMBTU/ton",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks; assumed 2.15 MMBTU/ton",
        group: "biochemical",
        displayName: "Energy Content",
        sortOrder: 11,
      },
      bestAlternateUse: {
        value: "Potato flour/starch, livestock feed",
        unit: "",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Best Alternate Use",
        sortOrder: 17,
      },
      alternateUseValue: {
        value: "10",
        unit: "$/ton",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Alternate Use Value",
        sortOrder: 18,
      },
      inhibitionRisk: {
        value: "Low (monitor pH due to rapid acidification from starch)",
        unit: "",
        confidence: "medium",
        provenance: "High starch content can cause rapid VFA accumulation",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "30-40",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Intact starch granules partially soluble; lower than processed potato waste",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Potato Peels",
    aliases: ["potato peels", "potato peel waste", "potato skins", "potato peelings"],
    category: "Food Processing Waste",
    properties: {
      deliveryForm: {
        value: "Wet solid / slurry",
        unit: "",
        confidence: "medium",
        provenance: "Potato peels from processing lines typically conveyed as wet solids or slurry",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw, from processing line",
        unit: "",
        confidence: "medium",
        provenance: "Peels generated during potato processing operations",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "18-25",
        unit: "% wet basis",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "85-95",
        unit: "% of TS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.85-0.95",
        unit: "",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "75-82",
        unit: "%",
        confidence: "high",
        provenance: "Derived from TS range (100% - TS%)",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      methanePotential: {
        value: "3.3-4.5",
        unit: "scf CH₄/lb VS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      energyContent: {
        value: "1.05-2.22",
        unit: "MMBTU/ton",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks; assumed 1.64 MMBTU/ton",
        group: "biochemical",
        displayName: "Energy Content",
        sortOrder: 11,
      },
      bestAlternateUse: {
        value: "Livestock feed, food additives",
        unit: "",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Best Alternate Use",
        sortOrder: 17,
      },
      alternateUseValue: {
        value: "20",
        unit: "$/ton",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Alternate Use Value",
        sortOrder: 18,
      },
      inhibitionRisk: {
        value: "Low (monitor pH due to rapid acidification)",
        unit: "",
        confidence: "medium",
        provenance: "Starch content can cause rapid VFA accumulation",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "25-35",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Higher fiber content reduces soluble fraction vs flesh (Liang & McDonald, 2014)",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Mashed Potatoes",
    aliases: ["mashed potatoes", "mashed potato waste", "potato mash", "cooked potato waste"],
    category: "Food Processing Waste",
    properties: {
      deliveryForm: {
        value: "Slurry / paste",
        unit: "",
        confidence: "medium",
        provenance: "Mashed potato waste from food manufacturing delivered as slurry or paste",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Cooked, processed",
        unit: "",
        confidence: "medium",
        provenance: "Mashed potato waste is a cooked, processed product",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "16-20",
        unit: "% wet basis",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "85-92",
        unit: "% of TS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.85-0.92",
        unit: "",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "80-84",
        unit: "%",
        confidence: "high",
        provenance: "Derived from TS range (100% - TS%)",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      methanePotential: {
        value: "5.4-5.7",
        unit: "scf CH₄/lb VS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      energyContent: {
        value: "1.53-2.18",
        unit: "MMBTU/ton",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks; assumed 1.85 MMBTU/ton",
        group: "biochemical",
        displayName: "Energy Content",
        sortOrder: 11,
      },
      bestAlternateUse: {
        value: "Livestock feed, ethanol",
        unit: "",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Best Alternate Use",
        sortOrder: 17,
      },
      alternateUseValue: {
        value: "20",
        unit: "$/ton",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Alternate Use Value",
        sortOrder: 18,
      },
      inhibitionRisk: {
        value: "Low (monitor pH due to rapid acidification from starch)",
        unit: "",
        confidence: "medium",
        provenance: "Cooked starch hydrolyzes rapidly; monitor VFA/alkalinity ratio",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "50-60",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Processing disrupts starch granules; high gelatinized starch in solution",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Apple Flesh",
    aliases: ["apple flesh", "apple pulp", "apple meat", "apple waste pulp"],
    category: "Food Processing Waste",
    properties: {
      deliveryForm: {
        value: "Wet solid / slurry",
        unit: "",
        confidence: "medium",
        provenance: "Apple flesh from processing typically delivered as wet solid or slurry",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw, from processing line",
        unit: "",
        confidence: "medium",
        provenance: "Apple flesh separated during juice/cider production",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "12-16",
        unit: "% wet basis",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "92-95",
        unit: "% of TS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.92-0.95",
        unit: "",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "84-88",
        unit: "%",
        confidence: "high",
        provenance: "Derived from TS range (100% - TS%)",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      methanePotential: {
        value: "6.0-6.2",
        unit: "scf CH₄/lb VS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      energyContent: {
        value: "1.38-1.96",
        unit: "MMBTU/ton",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks; assumed 1.67 MMBTU/ton",
        group: "biochemical",
        displayName: "Energy Content",
        sortOrder: 11,
      },
      bestAlternateUse: {
        value: "Cider, vinegar, baked goods",
        unit: "",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Best Alternate Use",
        sortOrder: 17,
      },
      alternateUseValue: {
        value: "50",
        unit: "$/ton",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Alternate Use Value",
        sortOrder: 18,
      },
      inhibitionRisk: {
        value: "Low (monitor pH; high sugar content causes rapid acidification)",
        unit: "",
        confidence: "medium",
        provenance: "High sugar content can cause rapid VFA accumulation",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "60-70",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "High in soluble sugars (fructose, glucose, sucrose); rapidly biodegradable (Kafle et al., 2013)",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Apple Peels",
    aliases: ["apple peels", "apple peel waste", "apple skins", "apple peelings"],
    category: "Food Processing Waste",
    properties: {
      deliveryForm: {
        value: "Wet solid",
        unit: "",
        confidence: "medium",
        provenance: "Apple peels from processing lines delivered as wet solids",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw, from processing line",
        unit: "",
        confidence: "medium",
        provenance: "Peels separated during apple processing operations",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "18-22",
        unit: "% wet basis",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "85-90",
        unit: "% of TS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.85-0.90",
        unit: "",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "78-82",
        unit: "%",
        confidence: "high",
        provenance: "Derived from TS range (100% - TS%)",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      methanePotential: {
        value: "5.2-5.6",
        unit: "scf CH₄/lb VS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      energyContent: {
        value: "1.65-2.31",
        unit: "MMBTU/ton",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks; assumed 1.98 MMBTU/ton",
        group: "biochemical",
        displayName: "Energy Content",
        sortOrder: 11,
      },
      bestAlternateUse: {
        value: "Food additive, livestock feed, food coloring",
        unit: "",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Best Alternate Use",
        sortOrder: 17,
      },
      alternateUseValue: {
        value: "50",
        unit: "$/ton",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Alternate Use Value",
        sortOrder: 18,
      },
      inhibitionRisk: {
        value: "Low",
        unit: "",
        confidence: "medium",
        provenance: "Moderate sugar and fiber content; low inhibition risk",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "30-40",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Cellulose and pectin reduce soluble fraction vs flesh",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Apple Core",
    aliases: ["apple core", "apple cores", "apple core waste"],
    category: "Food Processing Waste",
    properties: {
      deliveryForm: {
        value: "Wet solid",
        unit: "",
        confidence: "medium",
        provenance: "Apple cores from processing lines delivered as wet solids",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw, from processing line",
        unit: "",
        confidence: "medium",
        provenance: "Cores separated during apple processing operations",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "18-22",
        unit: "% wet basis",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "88-92",
        unit: "% of TS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.88-0.92",
        unit: "",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "78-82",
        unit: "%",
        confidence: "high",
        provenance: "Derived from TS range (100% - TS%)",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      methanePotential: {
        value: "5.4-5.8",
        unit: "scf CH₄/lb VS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      energyContent: {
        value: "1.78-2.44",
        unit: "MMBTU/ton",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks; assumed 2.11 MMBTU/ton",
        group: "biochemical",
        displayName: "Energy Content",
        sortOrder: 11,
      },
      bestAlternateUse: {
        value: "Pectin, livestock feed, cider, vinegar, ethanol",
        unit: "",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Best Alternate Use",
        sortOrder: 17,
      },
      alternateUseValue: {
        value: "50",
        unit: "$/ton",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Alternate Use Value",
        sortOrder: 18,
      },
      inhibitionRisk: {
        value: "Low",
        unit: "",
        confidence: "medium",
        provenance: "Moderate sugar content; seeds contain minor amygdalin but not at inhibitory levels for AD",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "35-45",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Moderate fiber with some soluble sugars and pectin",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Apple Pomace",
    aliases: ["apple pomace", "apple marc", "apple press cake", "apple fiber waste"],
    category: "Food Processing Waste",
    properties: {
      deliveryForm: {
        value: "Wet solid / press cake",
        unit: "",
        confidence: "medium",
        provenance: "Apple pomace is the solid residue after juice pressing",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw, post-pressing",
        unit: "",
        confidence: "medium",
        provenance: "Pomace generated after juice/cider pressing operations",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "18-25",
        unit: "% wet basis",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "85-90",
        unit: "% of TS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.85-0.90",
        unit: "",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "75-82",
        unit: "%",
        confidence: "high",
        provenance: "Derived from TS range (100% - TS%)",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      methanePotential: {
        value: "2.4-4.7",
        unit: "scf CH₄/lb VS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      energyContent: {
        value: "0.76-2.20",
        unit: "MMBTU/ton",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks; assumed 1.48 MMBTU/ton",
        group: "biochemical",
        displayName: "Energy Content",
        sortOrder: 11,
      },
      bestAlternateUse: {
        value: "Livestock feed, pectin",
        unit: "",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Best Alternate Use",
        sortOrder: 17,
      },
      alternateUseValue: {
        value: "55",
        unit: "$/ton",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Alternate Use Value",
        sortOrder: 18,
      },
      inhibitionRisk: {
        value: "Low (high fiber content reduces hydrolysis rate)",
        unit: "",
        confidence: "medium",
        provenance: "Post-pressing pomace has lower sugar content; fiber slows digestion kinetics",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "30-40",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Post-pressing residue; most soluble sugars extracted during juicing (Kafle et al., 2013)",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Whole Apple",
    aliases: ["whole apple", "whole apples", "cull apples", "reject apples", "waste apples"],
    category: "Food Processing Waste",
    properties: {
      deliveryForm: {
        value: "Wet solid",
        unit: "",
        confidence: "medium",
        provenance: "Whole apples from sorting/grading operations delivered as wet solids",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw, unprocessed",
        unit: "",
        confidence: "medium",
        provenance: "Cull or reject apples received whole without processing",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "14-18",
        unit: "% wet basis",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "90-93",
        unit: "% of TS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.90-0.93",
        unit: "",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "82-86",
        unit: "%",
        confidence: "high",
        provenance: "Derived from TS range (100% - TS%)",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      methanePotential: {
        value: "5.6-6.1",
        unit: "scf CH₄/lb VS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      energyContent: {
        value: "1.47-2.12",
        unit: "MMBTU/ton",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks; assumed 1.80 MMBTU/ton",
        group: "biochemical",
        displayName: "Energy Content",
        sortOrder: 11,
      },
      bestAlternateUse: {
        value: "Apple juice, cider, vinegar, livestock feed",
        unit: "",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Best Alternate Use",
        sortOrder: 17,
      },
      alternateUseValue: {
        value: "75",
        unit: "$/ton",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Alternate Use Value",
        sortOrder: 18,
      },
      preprocessingRequirement: {
        value: "Size reduction (grinding/chopping)",
        unit: "",
        confidence: "medium",
        provenance: "Whole apples require size reduction for digester feed",
        group: "contaminants",
        displayName: "Expected Preprocessing",
        sortOrder: 12,
      },
      inhibitionRisk: {
        value: "Low (monitor pH; high sugar content causes rapid acidification)",
        unit: "",
        confidence: "medium",
        provenance: "High sugar content can cause rapid VFA accumulation",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "50-60",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Weighted average of flesh, peel, and core; sugar-dominant",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Whole Onion",
    aliases: ["whole onion", "whole onions", "cull onions", "reject onions", "onion waste", "onion culls"],
    category: "Food Processing Waste",
    properties: {
      deliveryForm: {
        value: "Wet solid",
        unit: "",
        confidence: "medium",
        provenance: "Whole onions from sorting/grading operations delivered as wet solids",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw, unprocessed",
        unit: "",
        confidence: "medium",
        provenance: "Cull or reject onions received whole without processing",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "10-12",
        unit: "% wet basis",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "85-92",
        unit: "% of TS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.85-0.92",
        unit: "",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "88-90",
        unit: "%",
        confidence: "high",
        provenance: "Derived from TS range (100% - TS%)",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      methanePotential: {
        value: "4.3-4.9",
        unit: "scf CH₄/lb VS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      energyContent: {
        value: "0.76-1.13",
        unit: "MMBTU/ton",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks; assumed 0.94 MMBTU/ton",
        group: "biochemical",
        displayName: "Energy Content",
        sortOrder: 11,
      },
      bestAlternateUse: {
        value: "Extracts for flavoring, animal feed",
        unit: "",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Best Alternate Use",
        sortOrder: 17,
      },
      alternateUseValue: {
        value: "5",
        unit: "$/ton",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Alternate Use Value",
        sortOrder: 18,
      },
      inhibitionRisk: {
        value: "Moderate (sulfur compounds from onion breakdown may affect methanogenesis)",
        unit: "",
        confidence: "medium",
        provenance: "Onions contain organosulfur compounds that can release H2S during digestion",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "55-65",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "High in soluble fructans, sugars, and organic acids (Sharma et al., 2016)",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Onion Peels",
    aliases: ["onion peels", "onion skins", "onion peel waste", "onion peelings", "onion skin waste"],
    category: "Food Processing Waste",
    properties: {
      deliveryForm: {
        value: "Dry solid",
        unit: "",
        confidence: "medium",
        provenance: "Onion peels are relatively dry papery material from processing",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw, from processing line",
        unit: "",
        confidence: "medium",
        provenance: "Peels separated during onion processing operations",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "22-26",
        unit: "% wet basis",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "75-85",
        unit: "% of TS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.75-0.85",
        unit: "",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "74-78",
        unit: "%",
        confidence: "high",
        provenance: "Derived from TS range (100% - TS%)",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      methanePotential: {
        value: "2.5-2.8",
        unit: "scf CH₄/lb VS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      energyContent: {
        value: "0.86-1.29",
        unit: "MMBTU/ton",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks; assumed 1.07 MMBTU/ton",
        group: "biochemical",
        displayName: "Energy Content",
        sortOrder: 11,
      },
      bestAlternateUse: {
        value: "Quercetin, natural dyes",
        unit: "",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Best Alternate Use",
        sortOrder: 17,
      },
      alternateUseValue: {
        value: "0",
        unit: "$/ton",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks; limited alternate market",
        group: "extended",
        displayName: "Alternate Use Value",
        sortOrder: 18,
      },
      inhibitionRisk: {
        value: "Moderate (sulfur compounds; high fiber reduces biodegradability)",
        unit: "",
        confidence: "medium",
        provenance: "Onion skins contain quercetin and organosulfur compounds; high lignin content limits degradation",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "15-25",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Outer dry layers are mostly insoluble fiber and phenolic compounds",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Raw Milk",
    aliases: ["raw milk", "whole milk", "waste milk", "surplus milk", "milk waste", "spoiled milk"],
    category: "Dairy Processing Waste",
    properties: {
      deliveryForm: {
        value: "Liquid",
        unit: "",
        confidence: "high",
        provenance: "Raw milk received as liquid from dairy operations",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw, refrigerated or ambient",
        unit: "",
        confidence: "medium",
        provenance: "Surplus or spoiled milk from dairy operations",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "12.5-13.2",
        unit: "% wet basis",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "92-93",
        unit: "% of TS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.92-0.93",
        unit: "",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "87-88",
        unit: "%",
        confidence: "high",
        provenance: "Derived from TS range (100% - TS%)",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      methanePotential: {
        value: "8.2",
        unit: "scf CH₄/lb VS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      energyContent: {
        value: "1.96-2.10",
        unit: "MMBTU/ton",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks; assumed 2.03 MMBTU/ton",
        group: "biochemical",
        displayName: "Energy Content",
        sortOrder: 11,
      },
      bestAlternateUse: {
        value: "Infant formula, cheese, yogurt, butter",
        unit: "",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Best Alternate Use",
        sortOrder: 17,
      },
      alternateUseValue: {
        value: "11",
        unit: "$/ton",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Alternate Use Value",
        sortOrder: 18,
      },
      foamingRisk: {
        value: "Moderate to High",
        unit: "",
        confidence: "medium",
        provenance: "Milk proteins and fats can cause foaming in digesters",
        group: "extended",
        displayName: "Foaming Risk",
        sortOrder: 15,
      },
      inhibitionRisk: {
        value: "Moderate (LCFA from milk fat; rapid acidification from lactose)",
        unit: "",
        confidence: "medium",
        provenance: "Milk fat generates LCFA during hydrolysis; lactose causes rapid VFA spikes",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "70-80",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Lactose, whey proteins, and minerals highly soluble (Metcalf & Eddy; dairy literature)",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Cheese Whey",
    aliases: ["cheese whey", "whey", "whey waste", "whey permeate", "acid whey", "sweet whey"],
    category: "Dairy Processing Waste",
    properties: {
      deliveryForm: {
        value: "Liquid",
        unit: "",
        confidence: "high",
        provenance: "Cheese whey is a liquid byproduct of cheese manufacturing",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw liquid, from cheese production",
        unit: "",
        confidence: "medium",
        provenance: "Whey separated during cheese-making process",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "4-7",
        unit: "% wet basis",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "85-95",
        unit: "% of TS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.85-0.95",
        unit: "",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "93-96",
        unit: "%",
        confidence: "high",
        provenance: "Derived from TS range (100% - TS%)",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      methanePotential: {
        value: "6.2-7.2",
        unit: "scf CH₄/lb VS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      energyContent: {
        value: "0.44-1.00",
        unit: "MMBTU/ton",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks; assumed 0.72 MMBTU/ton",
        group: "biochemical",
        displayName: "Energy Content",
        sortOrder: 11,
      },
      bestAlternateUse: {
        value: "Whey protein isolate, lactose, livestock feed",
        unit: "",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Best Alternate Use",
        sortOrder: 17,
      },
      alternateUseValue: {
        value: "5",
        unit: "$/ton",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Alternate Use Value",
        sortOrder: 18,
      },
      inhibitionRisk: {
        value: "Moderate (rapid acidification from lactose; low pH)",
        unit: "",
        confidence: "medium",
        provenance: "Whey has low pH (4-6) and high lactose causes rapid VFA production; buffer alkalinity needed",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "85-95",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Predominantly dissolved lactose and whey proteins; very high sCOD (Prazeres et al., 2012)",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Cream",
    aliases: ["cream", "cream waste", "surplus cream", "waste cream", "dairy cream"],
    category: "Dairy Processing Waste",
    properties: {
      deliveryForm: {
        value: "Liquid / semi-solid",
        unit: "",
        confidence: "high",
        provenance: "Cream received as thick liquid or semi-solid from dairy processing",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw or pasteurized",
        unit: "",
        confidence: "medium",
        provenance: "Surplus or waste cream from dairy processing operations",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "32-36",
        unit: "% wet basis",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "90-93",
        unit: "% of TS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.90-0.93",
        unit: "",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "64-68",
        unit: "%",
        confidence: "high",
        provenance: "Derived from TS range (100% - TS%)",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      methanePotential: {
        value: "9.0-12.0",
        unit: "scf CH₄/lb VS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      energyContent: {
        value: "5.39-8.36",
        unit: "MMBTU/ton",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks; assumed 6.87 MMBTU/ton",
        group: "biochemical",
        displayName: "Energy Content",
        sortOrder: 11,
      },
      bestAlternateUse: {
        value: "Butter, ice cream, cosmetic products",
        unit: "",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Best Alternate Use",
        sortOrder: 17,
      },
      alternateUseValue: {
        value: "10",
        unit: "$/ton",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Alternate Use Value",
        sortOrder: 18,
      },
      foamingRisk: {
        value: "High",
        unit: "",
        confidence: "high",
        provenance: "Very high fat content causes significant foaming in digesters; antifoam systems essential",
        group: "extended",
        displayName: "Foaming Risk",
        sortOrder: 15,
      },
      inhibitionRisk: {
        value: "High (LCFA inhibition from high fat content; metered dosing required)",
        unit: "",
        confidence: "high",
        provenance: "Cream is predominantly fat; LCFA from hydrolysis inhibits methanogens. Limit to 20-30% of OLR",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "10-20",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Emulsified lipids are colloidal/particulate; minimal truly soluble COD",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Milk Processing Wastewater",
    aliases: ["milk processing wastewater", "dairy processing wastewater", "DPWW", "dairy wastewater", "milk wastewater", "dairy plant wastewater"],
    category: "Dairy Processing Waste",
    properties: {
      deliveryForm: {
        value: "Liquid (dilute)",
        unit: "",
        confidence: "high",
        provenance: "Dairy processing wastewater is a dilute liquid waste stream",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw wastewater, mixed CIP and process water",
        unit: "",
        confidence: "medium",
        provenance: "Contains rinse water, CIP solutions, product losses, and floor wash",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "0.3-1.5",
        unit: "% wet basis",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "80-95",
        unit: "% of TS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.80-0.95",
        unit: "",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "98.5-99.7",
        unit: "%",
        confidence: "high",
        provenance: "Derived from TS range (100% - TS%)",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      methanePotential: {
        value: "7.0-7.5",
        unit: "scf CH₄/lb VS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      energyContent: {
        value: "0.03-0.22",
        unit: "MMBTU/ton",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks; assumed 0.13 MMBTU/ton",
        group: "biochemical",
        displayName: "Energy Content",
        sortOrder: 11,
      },
      bestAlternateUse: {
        value: "Fertigation, feedstock for fermentation",
        unit: "",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Best Alternate Use",
        sortOrder: 17,
      },
      alternateUseValue: {
        value: "8",
        unit: "$/ton",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Alternate Use Value",
        sortOrder: 18,
      },
      inhibitionRisk: {
        value: "Low to Moderate (pH variability from CIP chemicals; low organic loading)",
        unit: "",
        confidence: "medium",
        provenance: "CIP chemicals (caustic, acid) can cause pH swings; equalization recommended",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "55-70",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Dissolved lactose, proteins, and cleaning chemicals (Kushwaha et al., 2011)",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Whole Grapes",
    aliases: ["whole grapes", "grape waste", "cull grapes", "reject grapes", "waste grapes", "grape culls"],
    category: "Food Processing Waste",
    properties: {
      deliveryForm: {
        value: "Wet solid",
        unit: "",
        confidence: "medium",
        provenance: "Whole grapes from vineyard or winery operations delivered as wet solids",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw, unprocessed",
        unit: "",
        confidence: "medium",
        provenance: "Cull or surplus grapes received whole from vineyard operations",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "18-20",
        unit: "% wet basis",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "90-95",
        unit: "% of TS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.90-0.95",
        unit: "",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "80-82",
        unit: "%",
        confidence: "high",
        provenance: "Derived from TS range (100% - TS%)",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      methanePotential: {
        value: "12.0-15.0",
        unit: "scf CH₄/lb VS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      energyContent: {
        value: "4.04-5.93",
        unit: "MMBTU/ton",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks; assumed 4.99 MMBTU/ton",
        group: "biochemical",
        displayName: "Energy Content",
        sortOrder: 11,
      },
      bestAlternateUse: {
        value: "Wine, juice, raisins",
        unit: "",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Best Alternate Use",
        sortOrder: 17,
      },
      alternateUseValue: {
        value: "20",
        unit: "$/ton",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Alternate Use Value",
        sortOrder: 18,
      },
      preprocessingRequirement: {
        value: "Size reduction (crushing/grinding), destemming",
        unit: "",
        confidence: "medium",
        provenance: "Whole grapes require crushing and destemming for digester feed",
        group: "contaminants",
        displayName: "Expected Preprocessing",
        sortOrder: 12,
      },
      inhibitionRisk: {
        value: "Low to Moderate (high sugar causes rapid acidification; polyphenols may slow methanogenesis)",
        unit: "",
        confidence: "medium",
        provenance: "Very high sugar content causes rapid VFA accumulation; grape polyphenols can inhibit methanogens at high concentrations",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "50-60",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "High in soluble sugars (glucose, fructose); skin contributes particulate fraction",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Grape Pomace",
    aliases: ["grape pomace", "grape marc", "grape press cake", "grape skins", "grape seeds", "winery pomace"],
    category: "Food Processing Waste",
    properties: {
      deliveryForm: {
        value: "Wet solid / press cake",
        unit: "",
        confidence: "medium",
        provenance: "Grape pomace is the solid residue after wine/juice pressing",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw, post-pressing",
        unit: "",
        confidence: "medium",
        provenance: "Pomace generated after wine/juice pressing operations",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "25-35",
        unit: "% wet basis",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "85-90",
        unit: "% of TS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.85-0.90",
        unit: "",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "65-75",
        unit: "%",
        confidence: "high",
        provenance: "Derived from TS range (100% - TS%)",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      methanePotential: {
        value: "8.0-12.8",
        unit: "scf CH₄/lb VS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      energyContent: {
        value: "3.54-8.39",
        unit: "MMBTU/ton",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks; assumed 5.96 MMBTU/ton",
        group: "biochemical",
        displayName: "Energy Content",
        sortOrder: 11,
      },
      bestAlternateUse: {
        value: "Livestock feed, grape seed oil, polyphenol extraction",
        unit: "",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Best Alternate Use",
        sortOrder: 17,
      },
      alternateUseValue: {
        value: "15",
        unit: "$/ton",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Alternate Use Value",
        sortOrder: 18,
      },
      inhibitionRisk: {
        value: "Moderate (polyphenols and tannins can inhibit methanogens; seed oil contributes LCFA)",
        unit: "",
        confidence: "medium",
        provenance: "Grape polyphenols and tannins have antimicrobial properties; grape seed oil yields LCFA during hydrolysis",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "25-35",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Post-pressing residue; most soluble sugars already extracted",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Grape Juice",
    aliases: ["grape juice", "grape juice waste", "grape must", "surplus grape juice", "waste grape juice"],
    category: "Food Processing Waste",
    properties: {
      deliveryForm: {
        value: "Liquid",
        unit: "",
        confidence: "high",
        provenance: "Grape juice is a liquid product from pressing operations",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw or pasteurized liquid",
        unit: "",
        confidence: "medium",
        provenance: "Surplus or waste grape juice from processing operations",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "10-18",
        unit: "% wet basis",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "95-98",
        unit: "% of TS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.95-0.98",
        unit: "",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "82-90",
        unit: "%",
        confidence: "high",
        provenance: "Derived from TS range (100% - TS%)",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      methanePotential: {
        value: "14.4-16.0",
        unit: "scf CH₄/lb VS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      energyContent: {
        value: "2.85-5.87",
        unit: "MMBTU/ton",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks; assumed 4.36 MMBTU/ton",
        group: "biochemical",
        displayName: "Energy Content",
        sortOrder: 11,
      },
      bestAlternateUse: {
        value: "Wine, vinegar, food concentrates",
        unit: "",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Best Alternate Use",
        sortOrder: 17,
      },
      alternateUseValue: {
        value: "11",
        unit: "$/ton",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Alternate Use Value",
        sortOrder: 18,
      },
      inhibitionRisk: {
        value: "Moderate (very high sugar content causes extremely rapid acidification; careful dosing required)",
        unit: "",
        confidence: "medium",
        provenance: "Grape juice has very high sugar (Brix 18-25); rapid fermentation to VFA can overwhelm buffering capacity",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "85-95",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "Almost entirely dissolved sugars; minimal suspended solids",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
  {
    name: "Winery Wastewater",
    aliases: ["winery wastewater", "winery waste", "wine wastewater", "winery effluent", "winery process water"],
    category: "Food Processing Waste",
    properties: {
      deliveryForm: {
        value: "Liquid (dilute)",
        unit: "",
        confidence: "high",
        provenance: "Winery wastewater is a dilute liquid waste stream from winemaking operations",
        group: "identity",
        displayName: "Delivery Form",
        sortOrder: 1,
      },
      receivingCondition: {
        value: "Raw wastewater, mixed process and wash water",
        unit: "",
        confidence: "medium",
        provenance: "Contains barrel wash, equipment rinse, crush pad runoff, and product losses",
        group: "identity",
        displayName: "Receiving Condition",
        sortOrder: 2,
      },
      totalSolids: {
        value: "0.5-2.5",
        unit: "% wet basis",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Total Solids (TS)",
        sortOrder: 3,
      },
      volatileSolids: {
        value: "70-90",
        unit: "% of TS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "Volatile Solids (VS)",
        sortOrder: 4,
      },
      vsTs: {
        value: "0.70-0.90",
        unit: "",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "physical",
        displayName: "VS/TS Ratio",
        sortOrder: 5,
      },
      moistureContent: {
        value: "97.5-99.5",
        unit: "%",
        confidence: "high",
        provenance: "Derived from TS range (100% - TS%)",
        group: "physical",
        displayName: "Moisture Content",
        sortOrder: 6,
      },
      methanePotential: {
        value: "8.0-14.0",
        unit: "scf CH₄/lb VS",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "biochemical",
        displayName: "Biochemical Methane Potential (BMP)",
        sortOrder: 10,
      },
      energyContent: {
        value: "0.06-0.66",
        unit: "MMBTU/ton",
        confidence: "high",
        provenance: "BMP analysis for WA agricultural waste feedstocks; assumed 0.36 MMBTU/ton",
        group: "biochemical",
        displayName: "Energy Content",
        sortOrder: 11,
      },
      bestAlternateUse: {
        value: "Tartaric acid recovery",
        unit: "",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Best Alternate Use",
        sortOrder: 17,
      },
      alternateUseValue: {
        value: "6",
        unit: "$/ton",
        confidence: "medium",
        provenance: "BMP analysis for WA agricultural waste feedstocks",
        group: "extended",
        displayName: "Alternate Use Value",
        sortOrder: 18,
      },
      inhibitionRisk: {
        value: "Low to Moderate (pH variability; seasonal flow patterns; polyphenols at low concentrations)",
        unit: "",
        confidence: "medium",
        provenance: "Winery wastewater pH varies widely (3-12) depending on cleaning cycles; equalization recommended",
        group: "extended",
        displayName: "Inhibition Risk",
        sortOrder: 16,
      },
      solubleCOD: {
        value: "60-75",
        unit: "% of total COD",
        confidence: "medium",
        provenance: "High in dissolved ethanol, sugars, organic acids, and phenolics (Ioannou et al., 2015)",
        group: "biochemical",
        displayName: "Soluble COD (sCOD) Fraction",
        sortOrder: 17,
      },
    },
  },
];

export interface WastewaterInfluentProfile {
  name: string;
  aliases: string[];
  category: string;
  properties: Record<string, FeedstockProperty>;
}

export const WASTEWATER_INFLUENT_LIBRARY: WastewaterInfluentProfile[] = [
  {
    name: "High-Strength Food Processing Wastewater",
    aliases: ["food processing wastewater", "food processing ww", "food plant wastewater", "food manufacturing wastewater", "food industry wastewater", "food processing", "food plant", "food manufacturing"],
    category: "Food Processing",
    properties: {
      peakFlow: {
        value: "1.5-3.0x avg",
        unit: "peaking factor",
        confidence: "medium",
        provenance: "Food processing plants often have batch operations with high peak-to-average ratios (Ludwigson, Industrial Pretreatment Design)",
        group: "identity",
        displayName: "Peak Flow Factor",
        sortOrder: 1,
      },
      bod: {
        value: "2,000-8,000",
        unit: "mg/L",
        confidence: "medium",
        provenance: "High-strength food processing wastewater BOD range (EPA 440/1-74-024; Ludwigson Ch. 3)",
        group: "biochemical",
        displayName: "BOD₅",
        sortOrder: 2,
      },
      cod: {
        value: "4,000-15,000",
        unit: "mg/L",
        confidence: "medium",
        provenance: "COD typically 1.5-2x BOD for food processing waste; varies with organic loading (Metcalf & Eddy; Ludwigson)",
        group: "biochemical",
        displayName: "COD",
        sortOrder: 4,
      },
      tss: {
        value: "500-3,000",
        unit: "mg/L",
        confidence: "medium",
        provenance: "Typical TSS range for food processing wastewater pre-screening (EPA industrial categories)",
        group: "biochemical",
        displayName: "TSS",
        sortOrder: 5,
      },
      fog: {
        value: "200-1,500",
        unit: "mg/L",
        confidence: "medium",
        provenance: "FOG highly variable by food type; fryer/rendering operations at upper end (Ludwigson Table 7)",
        group: "biochemical",
        displayName: "FOG (Fats, Oils, Grease)",
        sortOrder: 6,
      },
      tkn: {
        value: "50-200",
        unit: "mg/L",
        confidence: "medium",
        provenance: "TKN depends on protein content of food products; meat/dairy higher than produce (EPA 440)",
        group: "biochemical",
        displayName: "TKN",
        sortOrder: 7,
      },
      ph: {
        value: "4.5-9.0",
        unit: "",
        confidence: "medium",
        provenance: "Food processing wastewater pH varies widely by product; acidic for fruit/vegetable, alkaline for dairy CIP (Ludwigson Ch. 4)",
        group: "biochemical",
        displayName: "pH Range",
        sortOrder: 8,
      },
      temperature: {
        value: "75-110",
        unit: "°F",
        confidence: "medium",
        provenance: "Food processing wastewater often elevated from cooking, CIP, and hot water use",
        group: "physical",
        displayName: "Temperature",
        sortOrder: 9,
      },
    },
  },
  {
    name: "Meat & Poultry Processing Wastewater",
    aliases: ["meat processing wastewater", "meat processing ww", "poultry processing wastewater", "poultry processing ww", "slaughterhouse wastewater", "meatpacking wastewater", "rendering wastewater", "meat processing", "poultry processing", "slaughterhouse", "meatpacking", "rendering plant"],
    category: "Meat & Poultry Processing",
    properties: {
      peakFlow: {
        value: "2.0-3.5x avg",
        unit: "peaking factor",
        confidence: "medium",
        provenance: "Meat processing has shift-based operations with significant kill floor wash-down peaks",
        group: "identity",
        displayName: "Peak Flow Factor",
        sortOrder: 1,
      },
      bod: {
        value: "1,500-5,000",
        unit: "mg/L",
        confidence: "medium",
        provenance: "EPA 40 CFR 432 (Meat & Poultry Products); Ludwigson industrial pretreatment data",
        group: "biochemical",
        displayName: "BOD₅",
        sortOrder: 2,
      },
      cod: {
        value: "3,000-10,000",
        unit: "mg/L",
        confidence: "medium",
        provenance: "COD/BOD ratio typically 1.8-2.2 for meat processing wastewater (Metcalf & Eddy)",
        group: "biochemical",
        displayName: "COD",
        sortOrder: 4,
      },
      tss: {
        value: "800-3,000",
        unit: "mg/L",
        confidence: "medium",
        provenance: "High TSS from blood, tissue, feathers, and rendering residues (EPA 40 CFR 432)",
        group: "biochemical",
        displayName: "TSS",
        sortOrder: 5,
      },
      fog: {
        value: "500-2,000",
        unit: "mg/L",
        confidence: "medium",
        provenance: "Very high FOG from animal fats and rendering; DAF typically required (Ludwigson Table 7)",
        group: "biochemical",
        displayName: "FOG (Fats, Oils, Grease)",
        sortOrder: 6,
      },
      tkn: {
        value: "100-400",
        unit: "mg/L",
        confidence: "medium",
        provenance: "High nitrogen from blood and protein; ammonia fraction significant (EPA 40 CFR 432)",
        group: "biochemical",
        displayName: "TKN",
        sortOrder: 7,
      },
      ph: {
        value: "6.0-8.5",
        unit: "",
        confidence: "medium",
        provenance: "Generally near neutral; CIP and blood processing can shift pH",
        group: "biochemical",
        displayName: "pH Range",
        sortOrder: 8,
      },
      temperature: {
        value: "80-120",
        unit: "°F",
        confidence: "medium",
        provenance: "Scalding, rendering, and CIP operations produce elevated temperatures",
        group: "physical",
        displayName: "Temperature",
        sortOrder: 9,
      },
    },
  },
  {
    name: "Dairy Processing Wastewater",
    aliases: ["dairy processing wastewater", "dairy processing ww", "dairy plant wastewater", "milk processing wastewater", "cheese processing wastewater", "creamery wastewater", "dairy processing", "dairy plant", "milk plant", "cheese plant", "creamery", "dairy wastewater"],
    category: "Dairy Processing",
    properties: {
      peakFlow: {
        value: "2.0-4.0x avg",
        unit: "peaking factor",
        confidence: "medium",
        provenance: "Dairy plants have batch CIP cycles and product changeovers creating significant peaks",
        group: "identity",
        displayName: "Peak Flow Factor",
        sortOrder: 1,
      },
      bod: {
        value: "1,500-6,000",
        unit: "mg/L",
        confidence: "medium",
        provenance: "EPA 40 CFR 405 (Dairy Products); whey and product losses are primary BOD sources",
        group: "biochemical",
        displayName: "BOD₅",
        sortOrder: 2,
      },
      cod: {
        value: "2,500-10,000",
        unit: "mg/L",
        confidence: "medium",
        provenance: "COD/BOD ratio typically 1.5-1.8 for dairy wastewater (Metcalf & Eddy)",
        group: "biochemical",
        displayName: "COD",
        sortOrder: 4,
      },
      tss: {
        value: "300-2,000",
        unit: "mg/L",
        confidence: "medium",
        provenance: "TSS from casein, milk solids, and CIP residues (EPA 40 CFR 405)",
        group: "biochemical",
        displayName: "TSS",
        sortOrder: 5,
      },
      fog: {
        value: "200-1,000",
        unit: "mg/L",
        confidence: "medium",
        provenance: "Butterfat and milk fat in wastewater; cream and butter operations higher (Ludwigson)",
        group: "biochemical",
        displayName: "FOG (Fats, Oils, Grease)",
        sortOrder: 6,
      },
      tkn: {
        value: "50-150",
        unit: "mg/L",
        confidence: "medium",
        provenance: "Nitrogen from milk proteins (casein, whey); moderate compared to meat processing",
        group: "biochemical",
        displayName: "TKN",
        sortOrder: 7,
      },
      ph: {
        value: "3.5-11.0",
        unit: "",
        confidence: "medium",
        provenance: "Wide pH swings from acidic whey and alkaline CIP chemicals; equalization critical (Ludwigson Ch. 4)",
        group: "biochemical",
        displayName: "pH Range",
        sortOrder: 8,
      },
      temperature: {
        value: "80-130",
        unit: "°F",
        confidence: "medium",
        provenance: "Pasteurization, CIP, and hot water washing produce elevated wastewater temperatures",
        group: "physical",
        displayName: "Temperature",
        sortOrder: 9,
      },
    },
  },
  {
    name: "Brewery & Beverage Wastewater",
    aliases: ["brewery wastewater", "brewery ww", "beverage wastewater", "beverage ww", "winery wastewater", "distillery wastewater", "soft drink wastewater", "brewery", "beverage plant", "winery", "distillery", "craft brewery", "brewing wastewater"],
    category: "Brewery & Beverage",
    properties: {
      peakFlow: {
        value: "2.0-3.0x avg",
        unit: "peaking factor",
        confidence: "medium",
        provenance: "Batch brewing and CIP cycles create significant flow peaks",
        group: "identity",
        displayName: "Peak Flow Factor",
        sortOrder: 1,
      },
      bod: {
        value: "2,000-6,000",
        unit: "mg/L",
        confidence: "medium",
        provenance: "Brewery wastewater BOD from wort, trub, yeast, and product losses (EPA; Brewers Association data)",
        group: "biochemical",
        displayName: "BOD₅",
        sortOrder: 2,
      },
      cod: {
        value: "3,000-10,000",
        unit: "mg/L",
        confidence: "medium",
        provenance: "COD/BOD ratio typically 1.5-1.7 for brewery wastewater; ethanol and sugars readily biodegradable",
        group: "biochemical",
        displayName: "COD",
        sortOrder: 4,
      },
      tss: {
        value: "200-1,500",
        unit: "mg/L",
        confidence: "medium",
        provenance: "TSS from spent grain, trub, yeast, and filter media (typical brewery effluent data)",
        group: "biochemical",
        displayName: "TSS",
        sortOrder: 5,
      },
      fog: {
        value: "50-200",
        unit: "mg/L",
        confidence: "medium",
        provenance: "Relatively low FOG compared to food processing; mostly from grain oils and cleaning agents",
        group: "biochemical",
        displayName: "FOG (Fats, Oils, Grease)",
        sortOrder: 6,
      },
      tkn: {
        value: "25-80",
        unit: "mg/L",
        confidence: "medium",
        provenance: "Moderate nitrogen from yeast and grain proteins; lower than meat/dairy processing",
        group: "biochemical",
        displayName: "TKN",
        sortOrder: 7,
      },
      ph: {
        value: "4.0-10.0",
        unit: "",
        confidence: "medium",
        provenance: "Acidic from fermentation waste; alkaline from CIP; equalization required (typical brewery data)",
        group: "biochemical",
        displayName: "pH Range",
        sortOrder: 8,
      },
      temperature: {
        value: "75-110",
        unit: "°F",
        confidence: "medium",
        provenance: "Elevated from brewing, pasteurization, and CIP operations",
        group: "physical",
        displayName: "Temperature",
        sortOrder: 9,
      },
    },
  },
  {
    name: "General Industrial Wastewater",
    aliases: ["industrial wastewater", "industrial ww", "industrial discharge", "industrial effluent", "factory wastewater", "manufacturing wastewater", "process wastewater", "industrial", "manufacturing"],
    category: "General Industrial",
    properties: {
      peakFlow: {
        value: "1.5-3.0x avg",
        unit: "peaking factor",
        confidence: "low",
        provenance: "Depends on batch vs. continuous operations; shift-based facilities have higher peaks",
        group: "identity",
        displayName: "Peak Flow Factor",
        sortOrder: 1,
      },
      bod: {
        value: "500-3,000",
        unit: "mg/L",
        confidence: "low",
        provenance: "Wide range depending on industry; food/organic industries higher than chemical/manufacturing",
        group: "biochemical",
        displayName: "BOD₅",
        sortOrder: 2,
      },
      cod: {
        value: "1,000-6,000",
        unit: "mg/L",
        confidence: "low",
        provenance: "COD/BOD ratio varies widely by industry; refractory organics increase ratio",
        group: "biochemical",
        displayName: "COD",
        sortOrder: 4,
      },
      tss: {
        value: "200-2,000",
        unit: "mg/L",
        confidence: "low",
        provenance: "TSS varies by industry; screening and primary sedimentation typically first steps",
        group: "biochemical",
        displayName: "TSS",
        sortOrder: 5,
      },
      fog: {
        value: "50-500",
        unit: "mg/L",
        confidence: "low",
        provenance: "FOG significant in food/meat processing; lower in chemical/manufacturing industries",
        group: "biochemical",
        displayName: "FOG (Fats, Oils, Grease)",
        sortOrder: 6,
      },
      tkn: {
        value: "30-150",
        unit: "mg/L",
        confidence: "low",
        provenance: "Nitrogen loading depends on raw materials and process chemistry",
        group: "biochemical",
        displayName: "TKN",
        sortOrder: 7,
      },
      ph: {
        value: "5.0-10.0",
        unit: "",
        confidence: "low",
        provenance: "Industrial wastewater pH highly variable; equalization and neutralization typically required per 40 CFR 403",
        group: "biochemical",
        displayName: "pH Range",
        sortOrder: 8,
      },
      temperature: {
        value: "70-110",
        unit: "°F",
        confidence: "low",
        provenance: "Process-dependent; some industries discharge above POTW temperature limits requiring cooling",
        group: "physical",
        displayName: "Temperature",
        sortOrder: 9,
      },
    },
  },
  {
    name: "Ethanol Plant Wastewater",
    aliases: ["ethanol wastewater", "ethanol plant ww", "ethanol production wastewater", "corn ethanol wastewater", "biofuel wastewater", "ethanol plant", "ethanol production", "biofuel plant"],
    category: "Ethanol Production",
    properties: {
      peakFlow: {
        value: "1.5-2.5x avg",
        unit: "peaking factor",
        confidence: "medium",
        provenance: "Relatively steady flow from continuous distillation; peaks during equipment cleaning",
        group: "identity",
        displayName: "Peak Flow Factor",
        sortOrder: 1,
      },
      bod: {
        value: "5,000-30,000",
        unit: "mg/L",
        confidence: "medium",
        provenance: "Very high BOD from stillage, thin stillage, and CIP waste; one of highest-strength industrial WW categories",
        group: "biochemical",
        displayName: "BOD₅",
        sortOrder: 2,
      },
      cod: {
        value: "10,000-60,000",
        unit: "mg/L",
        confidence: "medium",
        provenance: "Extremely high COD from residual sugars, ethanol, and organic acids in stillage",
        group: "biochemical",
        displayName: "COD",
        sortOrder: 4,
      },
      tss: {
        value: "1,000-10,000",
        unit: "mg/L",
        confidence: "medium",
        provenance: "High solids from grain residues and yeast biomass in thin stillage",
        group: "biochemical",
        displayName: "TSS",
        sortOrder: 5,
      },
      fog: {
        value: "100-500",
        unit: "mg/L",
        confidence: "low",
        provenance: "Moderate FOG from corn oil and grain lipids; corn oil extraction reduces FOG",
        group: "biochemical",
        displayName: "FOG (Fats, Oils, Grease)",
        sortOrder: 6,
      },
      tkn: {
        value: "200-800",
        unit: "mg/L",
        confidence: "medium",
        provenance: "Very high nitrogen from yeast and grain proteins; ammonia significant after fermentation",
        group: "biochemical",
        displayName: "TKN",
        sortOrder: 7,
      },
      ph: {
        value: "3.5-5.0",
        unit: "",
        confidence: "medium",
        provenance: "Acidic from fermentation byproducts and organic acids; pH adjustment required before discharge",
        group: "biochemical",
        displayName: "pH Range",
        sortOrder: 8,
      },
      temperature: {
        value: "100-150",
        unit: "°F",
        confidence: "medium",
        provenance: "Very high temperatures from distillation columns and evaporators; cooling likely required",
        group: "physical",
        displayName: "Temperature",
        sortOrder: 9,
      },
    },
  },
];

export function matchWastewaterInfluentType(feedstockName: string): WastewaterInfluentProfile | undefined {
  const lower = feedstockName.toLowerCase().trim();
  for (const profile of WASTEWATER_INFLUENT_LIBRARY) {
    if (profile.name.toLowerCase() === lower) return profile;
    for (const alias of profile.aliases) {
      if (lower.includes(alias) || alias.includes(lower)) return profile;
    }
  }
  return undefined;
}

export function matchFeedstockType(feedstockName: string): FeedstockProfile | undefined {
  const lower = feedstockName.toLowerCase().trim();
  for (const profile of FEEDSTOCK_LIBRARY) {
    if (profile.name.toLowerCase() === lower) return profile;
    for (const alias of profile.aliases) {
      if (lower.includes(alias) || alias.includes(lower)) return profile;
    }
  }
  return undefined;
}

const SLUDGE_ONLY_KEYS = new Set([
  "deliveryForm",
  "receivingCondition",
  "preprocessingRequirement",
]);

const SOLIDS_ONLY_KEYS = new Set([
  "totalSolids",
  "volatileSolids",
  "vsTs",
  "moistureContent",
  "bulkDensity",
  "cnRatio",
  "methanePotential",
  "biodegradableFraction",
  "inertFraction",
]);

export function enrichFeedstockSpecs(
  feedstockType: string,
  userProvidedParams: Record<string, { value: string; unit?: string; extractionSource?: string }>,
  projectType?: string | null,
): Record<string, EnrichedFeedstockSpec> {
  const specs: Record<string, EnrichedFeedstockSpec> = {};
  const isTypeA = projectType === "A";

  let matchedProperties: Record<string, FeedstockProperty> | null = null;

  if (isTypeA) {
    const wwProfile = matchWastewaterInfluentType(feedstockType);
    if (wwProfile) {
      matchedProperties = wwProfile.properties;
    }
  } else {
    const profile = matchFeedstockType(feedstockType);
    if (profile) {
      matchedProperties = profile.properties;
    }
  }

  if (matchedProperties) {
    for (const [key, prop] of Object.entries(matchedProperties)) {
      specs[key] = {
        value: prop.value,
        unit: prop.unit,
        source: "estimated_default",
        confidence: prop.confidence,
        provenance: prop.provenance,
        group: prop.group,
        displayName: prop.displayName,
        sortOrder: prop.sortOrder,
      };
    }
  }

  const paramKeyMap: Record<string, string> = {
    "total solids": "totalSolids",
    "total solids (ts)": "totalSolids",
    "ts": "totalSolids",
    "ts%": "totalSolids",
    "ts (%)": "totalSolids",
    "volatile solids": "volatileSolids",
    "volatile solids (vs)": "volatileSolids",
    "vs": "volatileSolids",
    "vs (% of ts)": "volatileSolids",
    "vs/ts": "vsTs",
    "vs/ts ratio": "vsTs",
    "vs to ts ratio": "vsTs",
    "moisture": "moistureContent",
    "moisture content": "moistureContent",
    "moisture (%)": "moistureContent",
    "bulk density": "bulkDensity",
    "bulk density (as received)": "bulkDensity",
    "density": "bulkDensity",
    "c:n": "cnRatio",
    "c:n ratio": "cnRatio",
    "cn ratio": "cnRatio",
    "c/n ratio": "cnRatio",
    "carbon to nitrogen ratio": "cnRatio",
    "carbon nitrogen ratio": "cnRatio",
    "carbon-to-nitrogen ratio": "cnRatio",
    "bmp": "methanePotential",
    "methane potential": "methanePotential",
    "biochemical methane potential": "methanePotential",
    "biochemical methane potential (bmp)": "methanePotential",
    "methane yield": "methanePotential",
    "biodegradable fraction": "biodegradableFraction",
    "biodegradable fraction of vs": "biodegradableFraction",
    "biodegradability": "biodegradableFraction",
    "inert fraction": "inertFraction",
    "inert/contaminant fraction": "inertFraction",
    "contaminant fraction": "inertFraction",
    "inerts": "inertFraction",
    "preprocessing": "preprocessingRequirement",
    "expected preprocessing": "preprocessingRequirement",
    "preprocessing requirement": "preprocessingRequirement",
    "expected preprocessing requirement": "preprocessingRequirement",
    "delivery form": "deliveryForm",
    "form": "deliveryForm",
    "receiving condition": "receivingCondition",
    "tkn": "tkn",
    "total kjeldahl nitrogen": "tkn",
    "total kjeldahl nitrogen (tkn)": "tkn",
    "ammonia": "ammoniaN",
    "ammonia-n": "ammoniaN",
    "nh3-n": "ammoniaN",
    "foaming risk": "foamingRisk",
    "inhibition risk": "inhibitionRisk",
    "pathogen risk": "pathogenRisk",
    "pathogen risk class": "pathogenRisk",
    "fog": "fogContent",
    "fog content": "fogContent",
    "fats oils grease": "fogContent",
    "fats, oils, grease": "fogContent",
    "fats, oils & grease": "fogContent",
    "fats, oils and grease": "fogContent",
    "o&g": "fogContent",
    "oil and grease": "fogContent",
    "oil & grease": "fogContent",
    "lipid fraction": "lipidFraction",
    "lipids": "lipidFraction",
    "bod": "bod",
    "bod5": "bod",
    "biochemical oxygen demand": "bod",
    "biochemical oxygen demand (bod)": "bod",
    "cod": "cod",
    "chemical oxygen demand": "cod",
    "chemical oxygen demand (cod)": "cod",
    "tss": "tss",
    "total suspended solids": "tss",
    "total suspended solids (tss)": "tss",
    "tds": "tds",
    "total dissolved solids": "tds",
    "total dissolved solids (tds)": "tds",
    "ph": "ph",
    "ph level": "ph",
    "ph range": "ph",
    "temperature": "temperature",
    "temp": "temperature",
    "nitrogen": "tkn",
    "phosphorus": "phosphorus",
    "total phosphorus": "phosphorus",
    "tp": "phosphorus",
    "flow": "flow",
    "average daily flow": "flow",
    "average flow": "flow",
    "daily flow": "flow",
    "influent flow": "flow",
    "peak flow": "peakFlow",
    "peak flow factor": "peakFlow",
    "peaking factor": "peakFlow",
    "peak": "peakFlow",
  };

  if (matchedProperties) {
    for (const [key, prop] of Object.entries(matchedProperties)) {
      const displayLower = prop.displayName.toLowerCase();
      if (!paramKeyMap[displayLower]) {
        paramKeyMap[displayLower] = key;
      }
    }
  }

  for (const [paramName, paramData] of Object.entries(userProvidedParams)) {
    const normalizedName = paramName.toLowerCase().trim();
    let mappedKey = paramKeyMap[normalizedName];

    if (!mappedKey) {
      let bestAlias = "";
      for (const [alias, key] of Object.entries(paramKeyMap)) {
        if (normalizedName.includes(alias) || alias.includes(normalizedName)) {
          if (alias.length > bestAlias.length) {
            bestAlias = alias;
            mappedKey = key;
          }
        }
      }
    }

    const resolvedSource: EnrichedFeedstockSpec["source"] =
      paramData.extractionSource === "ai_extraction" ? "ai_inferred" : "user_provided";
    const resolvedProvenance = resolvedSource === "ai_inferred"
      ? "AI-inferred value from project input"
      : "User-provided value from project input";
    const resolvedConfidence: EnrichedFeedstockSpec["confidence"] =
      resolvedSource === "ai_inferred" ? "medium" : "high";

    if (mappedKey && specs[mappedKey]) {
      specs[mappedKey] = {
        ...specs[mappedKey],
        value: paramData.value,
        unit: paramData.unit || specs[mappedKey].unit,
        source: resolvedSource,
        confidence: resolvedConfidence,
        provenance: resolvedProvenance,
      };
    } else if (mappedKey) {
      const BIOCHEMICAL_KEYS = new Set(["bod", "cod", "tss", "tds", "tkn", "ph", "fogContent", "phosphorus", "ammoniaN"]);
      const IDENTITY_KEYS = new Set(["peakFlow"]);
      specs[mappedKey] = {
        value: paramData.value,
        unit: paramData.unit || "",
        source: resolvedSource,
        confidence: resolvedConfidence,
        provenance: resolvedProvenance,
        group: IDENTITY_KEYS.has(mappedKey) ? "identity" : BIOCHEMICAL_KEYS.has(mappedKey) ? "biochemical" : "physical",
        displayName: paramName,
        sortOrder: 50,
      };
    }
  }

  return specs;
}

export interface BiogasProfile {
  name: string;
  aliases: string[];
  properties: Record<string, { value: string; unit: string; displayName: string; group: string; sortOrder: number; provenance: string }>;
}

const BIOGAS_PROFILES: BiogasProfile[] = [
  {
    name: "WWTP Digester Gas",
    aliases: ["wwtp", "wastewater", "municipal digester", "sewage digester", "wwtf", "water reclamation", "wpcp"],
    properties: {
      avgFlowScfm: { value: "TBD", unit: "SCFM", displayName: "Average Flow", group: "flow", sortOrder: 1, provenance: "Project-specific — must be provided by user or calculated from digester sizing" },
      maxFlowScfm: { value: "TBD", unit: "SCFM", displayName: "Max Flow", group: "flow", sortOrder: 2, provenance: "Typically 1.2-1.5× average flow; project-specific" },
      minFlowScfm: { value: "TBD", unit: "SCFM", displayName: "Min Flow", group: "flow", sortOrder: 3, provenance: "Typically 0.5-0.7× average flow; project-specific" },
      pressurePsig: { value: "0.5-2", unit: "psig", displayName: "Pressure", group: "flow", sortOrder: 4, provenance: "Typical WWTP digester gas pressure at outlet (low-pressure gas holder)" },
      ch4: { value: "55-65", unit: "%", displayName: "Methane (CH₄)", group: "composition", sortOrder: 5, provenance: "Typical WWTP digester gas composition (WEF MOP 8)" },
      co2: { value: "35-45", unit: "%", displayName: "Carbon Dioxide (CO₂)", group: "composition", sortOrder: 6, provenance: "Typical WWTP digester gas composition" },
      h2s: { value: "500-3,000", unit: "ppm", displayName: "Hydrogen Sulfide (H₂S)", group: "composition", sortOrder: 7, provenance: "Typical WWTP digester gas; highly variable by sludge characteristics" },
      n2: { value: "1-3", unit: "%", displayName: "Nitrogen (N₂)", group: "composition", sortOrder: 8, provenance: "Trace N₂ from air ingress" },
      o2: { value: "0.1-0.5", unit: "%", displayName: "Oxygen (O₂)", group: "composition", sortOrder: 9, provenance: "Trace O₂ from air leaks in gas collection system" },
      btuPerScf: { value: "550-650", unit: "Btu/SCF", displayName: "Heating Value", group: "energy", sortOrder: 10, provenance: "Based on 55-65% CH₄ content (LHV basis)" },
      mmbtuPerDay: { value: "TBD", unit: "MMBtu/Day", displayName: "Energy Content", group: "energy", sortOrder: 11, provenance: "Calculated from average flow × heating value; project-specific" },
      siloxanes: { value: "5-50", unit: "mg/m³", displayName: "Siloxanes", group: "contaminants", sortOrder: 12, provenance: "WWTP digester gas typically has higher siloxanes from consumer products in sewage" },
      moisture: { value: "Saturated", unit: "at gas temp", displayName: "Moisture", group: "physical", sortOrder: 13, provenance: "Biogas exits digester water-saturated" },
    },
  },
  {
    name: "Landfill Gas",
    aliases: ["landfill", "lfg", "municipal solid waste", "msw landfill"],
    properties: {
      avgFlowScfm: { value: "TBD", unit: "SCFM", displayName: "Average Flow", group: "flow", sortOrder: 1, provenance: "Project-specific — must be provided by user or from LFG collection system design" },
      maxFlowScfm: { value: "TBD", unit: "SCFM", displayName: "Max Flow", group: "flow", sortOrder: 2, provenance: "Typically 1.2-1.5× average flow; seasonal variation in LFG" },
      minFlowScfm: { value: "TBD", unit: "SCFM", displayName: "Min Flow", group: "flow", sortOrder: 3, provenance: "Typically 0.6-0.8× average flow; lower in winter months" },
      pressurePsig: { value: "0.5-3", unit: "psig", displayName: "Pressure", group: "flow", sortOrder: 4, provenance: "Typical LFG collection system pressure at blower discharge" },
      ch4: { value: "45-55", unit: "%", displayName: "Methane (CH₄)", group: "composition", sortOrder: 5, provenance: "Typical landfill gas composition (EPA AP-42, Chapter 2.4)" },
      co2: { value: "35-45", unit: "%", displayName: "Carbon Dioxide (CO₂)", group: "composition", sortOrder: 6, provenance: "Typical landfill gas composition" },
      h2s: { value: "50-500", unit: "ppm", displayName: "Hydrogen Sulfide (H₂S)", group: "composition", sortOrder: 7, provenance: "Landfill gas typically lower H₂S than digester gas" },
      n2: { value: "2-15", unit: "%", displayName: "Nitrogen (N₂)", group: "composition", sortOrder: 8, provenance: "Air infiltration; can be significant in older wells" },
      o2: { value: "0.5-3", unit: "%", displayName: "Oxygen (O₂)", group: "composition", sortOrder: 9, provenance: "Air infiltration through landfill cover" },
      btuPerScf: { value: "450-550", unit: "Btu/SCF", displayName: "Heating Value", group: "energy", sortOrder: 10, provenance: "Based on 45-55% CH₄ content (LHV basis)" },
      mmbtuPerDay: { value: "TBD", unit: "MMBtu/Day", displayName: "Energy Content", group: "energy", sortOrder: 11, provenance: "Calculated from average flow × heating value; project-specific" },
      siloxanes: { value: "1-20", unit: "mg/m³", displayName: "Siloxanes", group: "contaminants", sortOrder: 12, provenance: "Variable; depends on waste composition" },
      moisture: { value: "Saturated", unit: "at gas temp", displayName: "Moisture", group: "physical", sortOrder: 13, provenance: "Landfill gas exits saturated with moisture" },
      nmoc: { value: "500-1,500", unit: "ppmv as hexane", displayName: "NMOCs", group: "contaminants", sortOrder: 14, provenance: "Non-methane organic compounds typical for MSW landfills" },
    },
  },
  {
    name: "Dairy Digester Gas",
    aliases: ["dairy", "dairy manure", "cow manure", "cattle digester", "farm digester", "ag digester", "agricultural digester"],
    properties: {
      avgFlowScfm: { value: "TBD", unit: "SCFM", displayName: "Average Flow", group: "flow", sortOrder: 1, provenance: "Project-specific — must be provided by user or calculated from herd size and digester design" },
      maxFlowScfm: { value: "TBD", unit: "SCFM", displayName: "Max Flow", group: "flow", sortOrder: 2, provenance: "Typically 1.3-1.5× average flow; seasonal feed variation" },
      minFlowScfm: { value: "TBD", unit: "SCFM", displayName: "Min Flow", group: "flow", sortOrder: 3, provenance: "Typically 0.5-0.7× average flow; lower in winter" },
      pressurePsig: { value: "0.5-2", unit: "psig", displayName: "Pressure", group: "flow", sortOrder: 4, provenance: "Typical covered lagoon or plug-flow digester gas pressure" },
      ch4: { value: "55-65", unit: "%", displayName: "Methane (CH₄)", group: "composition", sortOrder: 5, provenance: "Typical dairy manure digester gas (AgSTAR)" },
      co2: { value: "35-45", unit: "%", displayName: "Carbon Dioxide (CO₂)", group: "composition", sortOrder: 6, provenance: "Typical dairy digester gas composition" },
      h2s: { value: "1,000-5,000", unit: "ppm", displayName: "Hydrogen Sulfide (H₂S)", group: "composition", sortOrder: 7, provenance: "Dairy manure digester gas; high sulfur from protein in feed" },
      n2: { value: "1-3", unit: "%", displayName: "Nitrogen (N₂)", group: "composition", sortOrder: 8, provenance: "Trace N₂ from air ingress" },
      o2: { value: "0.1-0.5", unit: "%", displayName: "Oxygen (O₂)", group: "composition", sortOrder: 9, provenance: "Minimal air ingress in covered lagoon/plug flow systems" },
      btuPerScf: { value: "550-650", unit: "Btu/SCF", displayName: "Heating Value", group: "energy", sortOrder: 10, provenance: "Based on 55-65% CH₄ content (LHV basis)" },
      mmbtuPerDay: { value: "TBD", unit: "MMBtu/Day", displayName: "Energy Content", group: "energy", sortOrder: 11, provenance: "Calculated from average flow × heating value; project-specific" },
      siloxanes: { value: "< 1", unit: "mg/m³", displayName: "Siloxanes", group: "contaminants", sortOrder: 12, provenance: "Agricultural biogas typically has negligible siloxanes" },
      moisture: { value: "Saturated", unit: "at gas temp", displayName: "Moisture", group: "physical", sortOrder: 13, provenance: "Biogas exits digester water-saturated" },
    },
  },
  {
    name: "Food Waste Digester Gas",
    aliases: ["food waste", "food processing", "organic waste digester", "industrial digester", "co-digestion"],
    properties: {
      avgFlowScfm: { value: "TBD", unit: "SCFM", displayName: "Average Flow", group: "flow", sortOrder: 1, provenance: "Project-specific — must be provided by user or calculated from feedstock volumes" },
      maxFlowScfm: { value: "TBD", unit: "SCFM", displayName: "Max Flow", group: "flow", sortOrder: 2, provenance: "Typically 1.2-1.4× average flow" },
      minFlowScfm: { value: "TBD", unit: "SCFM", displayName: "Min Flow", group: "flow", sortOrder: 3, provenance: "Typically 0.6-0.8× average flow" },
      pressurePsig: { value: "0.5-2", unit: "psig", displayName: "Pressure", group: "flow", sortOrder: 4, provenance: "Typical food waste digester gas pressure" },
      ch4: { value: "58-68", unit: "%", displayName: "Methane (CH₄)", group: "composition", sortOrder: 5, provenance: "Food waste AD biogas typically higher CH₄ due to high VS destruction" },
      co2: { value: "30-40", unit: "%", displayName: "Carbon Dioxide (CO₂)", group: "composition", sortOrder: 6, provenance: "Typical food waste digester gas composition" },
      h2s: { value: "500-3,000", unit: "ppm", displayName: "Hydrogen Sulfide (H₂S)", group: "composition", sortOrder: 7, provenance: "Variable; depends on protein content of food waste" },
      n2: { value: "1-3", unit: "%", displayName: "Nitrogen (N₂)", group: "composition", sortOrder: 8, provenance: "Trace N₂" },
      o2: { value: "0.1-0.5", unit: "%", displayName: "Oxygen (O₂)", group: "composition", sortOrder: 9, provenance: "Minimal air ingress in well-sealed digesters" },
      btuPerScf: { value: "580-680", unit: "Btu/SCF", displayName: "Heating Value", group: "energy", sortOrder: 10, provenance: "Based on 58-68% CH₄ content (LHV basis)" },
      mmbtuPerDay: { value: "TBD", unit: "MMBtu/Day", displayName: "Energy Content", group: "energy", sortOrder: 11, provenance: "Calculated from average flow × heating value; project-specific" },
      siloxanes: { value: "< 1", unit: "mg/m³", displayName: "Siloxanes", group: "contaminants", sortOrder: 12, provenance: "Food waste biogas typically has negligible siloxanes" },
      moisture: { value: "Saturated", unit: "at gas temp", displayName: "Moisture", group: "physical", sortOrder: 13, provenance: "Biogas exits digester water-saturated" },
    },
  },
];

function matchBiogasProfile(sourceType: string): BiogasProfile | null {
  const lower = sourceType.toLowerCase();
  for (const profile of BIOGAS_PROFILES) {
    if (lower.includes(profile.name.toLowerCase())) return profile;
    for (const alias of profile.aliases) {
      if (lower.includes(alias)) return profile;
    }
  }
  return BIOGAS_PROFILES[0];
}

export function enrichBiogasSpecs(
  biogasSourceType: string,
  userProvidedParams: Record<string, { value: string; unit?: string; extractionSource?: string }>,
): Record<string, EnrichedFeedstockSpec> {
  const profile = matchBiogasProfile(biogasSourceType);
  const specs: Record<string, EnrichedFeedstockSpec> = {};

  if (profile) {
    for (const [key, prop] of Object.entries(profile.properties)) {
      specs[key] = {
        value: prop.value,
        unit: prop.unit,
        source: "estimated_default",
        confidence: "medium",
        provenance: prop.provenance,
        group: prop.group as EnrichedFeedstockSpec["group"],
        displayName: prop.displayName,
        sortOrder: prop.sortOrder,
      };
    }
  }

  const biogasParamMap: Record<string, string> = {
    "average flow": "avgFlowScfm",
    "avg flow": "avgFlowScfm",
    "average flow scfm": "avgFlowScfm",
    "avg flow scfm": "avgFlowScfm",
    "biogas flow": "avgFlowScfm",
    "gas flow": "avgFlowScfm",
    "flow rate": "avgFlowScfm",
    "max flow": "maxFlowScfm",
    "maximum flow": "maxFlowScfm",
    "max flow scfm": "maxFlowScfm",
    "peak flow": "maxFlowScfm",
    "min flow": "minFlowScfm",
    "minimum flow": "minFlowScfm",
    "min flow scfm": "minFlowScfm",
    "pressure": "pressurePsig",
    "pressure psig": "pressurePsig",
    "gas pressure": "pressurePsig",
    "inlet pressure": "pressurePsig",
    "ch4": "ch4",
    "methane": "ch4",
    "ch₄": "ch4",
    "methane content": "ch4",
    "ch4%": "ch4",
    "ch4 %": "ch4",
    "co2": "co2",
    "carbon dioxide": "co2",
    "co₂": "co2",
    "co2%": "co2",
    "co2 %": "co2",
    "h2s": "h2s",
    "hydrogen sulfide": "h2s",
    "h₂s": "h2s",
    "h2s ppm": "h2s",
    "n2": "n2",
    "nitrogen": "n2",
    "n2%": "n2",
    "n2 %": "n2",
    "o2": "o2",
    "oxygen": "o2",
    "o₂": "o2",
    "o2%": "o2",
    "o2 %": "o2",
    "btu/scf": "btuPerScf",
    "btu per scf": "btuPerScf",
    "heating value": "btuPerScf",
    "btu": "btuPerScf",
    "hhv": "btuPerScf",
    "lhv": "btuPerScf",
    "mmbtu/day": "mmbtuPerDay",
    "mmbtu per day": "mmbtuPerDay",
    "energy content": "mmbtuPerDay",
    "energy output": "mmbtuPerDay",
    "mmbtu": "mmbtuPerDay",
    "siloxanes": "siloxanes",
    "siloxane": "siloxanes",
    "moisture": "moisture",
    "water content": "moisture",
    "current disposition": "currentDisposition",
    "disposition": "currentDisposition",
    "variability": "variability",
    "flow variability": "variability",
    "nmoc": "nmoc",
    "nmocs": "nmoc",
  };

  for (const [paramName, paramData] of Object.entries(userProvidedParams)) {
    const normalizedName = paramName.toLowerCase().trim();
    let mappedKey = biogasParamMap[normalizedName];

    if (!mappedKey) {
      for (const [alias, key] of Object.entries(biogasParamMap)) {
        if (normalizedName.includes(alias) || alias.includes(normalizedName)) {
          mappedKey = key;
          break;
        }
      }
    }

    const resolvedSource: EnrichedFeedstockSpec["source"] =
      paramData.extractionSource === "ai_extraction" ? "ai_inferred" : "user_provided";
    const resolvedProvenance = resolvedSource === "ai_inferred"
      ? "AI-inferred value from project input"
      : "User-provided value from project input";
    const resolvedConfidence: EnrichedFeedstockSpec["confidence"] =
      resolvedSource === "ai_inferred" ? "medium" : "high";

    if (mappedKey && specs[mappedKey]) {
      specs[mappedKey] = {
        ...specs[mappedKey],
        value: paramData.value,
        unit: paramData.unit || specs[mappedKey].unit,
        source: resolvedSource,
        confidence: resolvedConfidence,
        provenance: resolvedProvenance,
      };
    } else if (mappedKey) {
      const displayNames: Record<string, string> = {
        avgFlowScfm: "Average Flow",
        maxFlowScfm: "Max Flow",
        minFlowScfm: "Min Flow",
        pressurePsig: "Pressure",
        btuPerScf: "Heating Value",
        mmbtuPerDay: "Energy Content",
        currentDisposition: "Current Disposition",
        variability: "Flow Variability",
      };
      specs[mappedKey] = {
        value: paramData.value,
        unit: paramData.unit || "",
        source: resolvedSource,
        confidence: resolvedConfidence,
        provenance: resolvedProvenance,
        group: "physical",
        displayName: displayNames[mappedKey] || paramName,
        sortOrder: 50,
      };
    }
  }

  return specs;
}
